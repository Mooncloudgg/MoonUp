<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moonup</title>
    <style>
      :root {
        --bg: #09090b; 
        --card: #121216; 
        --accent: #5b21b6; 
        --text: #ffffff;
        --text-dim: #a1a1aa; 
        --border: #27272a; 
        --success: #10b981; 
        --danger: #ef4444; 
        --discord: #5865F2;
      }
      
      body { 
        margin: 0; 
        background-color: var(--bg); 
        color: var(--text); 
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
        display: flex; 
        justify-content: center; 
        align-items: center; /* Vertikal zentriert */
        padding: 20px 10px;
        min-height: 100vh;
        box-sizing: border-box;
      }
      
      .container { width: 100%; max-width: 420px; display: flex; flex-direction: column; gap: 12px; position: relative; }
      
      /* LOGO KLEINER GEMACHT */
      .main-banner { 
        width: 100%; 
        max-width: 140px; /* Reduziert von 220px */
        height: auto; 
        display: block; 
        margin: 0 auto 5px; 
        filter: drop-shadow(0 0 15px rgba(91, 33, 182, 0.3)); 
      }
      
      /* CARD STYLES */
      .card { 
        background: var(--card); 
        border: 1px solid var(--border); 
        border-radius: 12px; 
        padding: 16px; 
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2); 
      }

      h2 { 
        margin: 0 0 12px 0; 
        font-size: 0.9rem; 
        font-weight: 700; 
        color: var(--text); 
        text-transform: uppercase; 
        letter-spacing: 0.05em; 
        padding-bottom: 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .login-btn { 
        width: 100%; padding: 12px; background-color: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.2s; display: flex; justify-content: center; align-items: center; font-size: 0.95rem; box-shadow: 0 4px 10px rgba(91, 33, 182, 0.2);
      }
      .login-btn:hover { background-color: #4c1d95; transform: translateY(-1px); }
      .login-btn:disabled { opacity: 0.6; cursor: wait; transform: none; }

      /* LOGIN STATUS - WICHTIG F√úR ZENTRIERUNG */
      #login-status {
        margin-top: 12px;
        font-size: 0.85rem;
        color: var(--text-dim);
        text-align: center;
      }
      /* Wenn leer, komplett ausblenden -> Button sitzt mittig */
      #login-status:empty {
        display: none;
        margin-top: 0;
      }

      #user-display {
        background: rgba(91, 33, 182, 0.05); border: 1px solid var(--accent); justify-content: space-between; align-items: center; padding: 10px 16px; border-radius: 10px; margin-bottom: 0;
      }
      
      .user-left { display: flex; align-items: center; gap: 12px; }
      .user-icon { font-size: 1.2rem; }
      #username-label { font-weight: 700; font-size: 1rem; color: #fff; }
      
      .logout-btn { 
        background: transparent; border: 1px solid var(--border); color: var(--text-dim); font-size: 0.75rem; padding: 6px 12px; border-radius: 6px; cursor: pointer; transition: 0.2s; text-transform: uppercase; font-weight: 600; letter-spacing: 0.05em;
      }
      .logout-btn:hover { color: var(--danger); border-color: var(--danger); background: rgba(239, 68, 68, 0.05); }

      /* WOW INSTALLATION & ADDONS */
      .section-header {
        display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;
      }
      .section-title {
        font-size: 0.75rem; font-weight: 700; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em;
      }
      .settings-icon {
        background: transparent; border: none; color: var(--text-dim); cursor: pointer; font-size: 1rem; padding: 0; transition: color 0.2s;
      }
      .settings-icon:hover { color: #fff; }

      .path-display-box { 
        background: #000000; padding: 10px; border-radius: 6px; font-size: 0.8rem; color: var(--text-dim); border: 1px solid var(--border); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-family: monospace; margin-bottom: 8px;
      }
      .btn-secondary {
        width: 100%; padding: 8px; background: transparent; border: 1px solid var(--border); color: var(--text-dim); border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: 0.2s; margin-bottom: 20px;
      }
      .btn-secondary:hover { border-color: #fff; color: #fff; }

      /* ADDONS LIST */
      .addon-header {
        display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid var(--border); padding-bottom: 8px;
      }
      .addon-title {
        font-size: 0.9rem; font-weight: 700; color: var(--text); text-transform: uppercase; letter-spacing: 0.05em;
      }
      #refresh-btn {
        background: transparent; border: none; font-size: 1.1rem; cursor: pointer; color: var(--text-dim); padding: 0; transition: color 0.2s;
      }
      #refresh-btn:hover { color: #fff; }

      .addon-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border); }
      .addon-item:last-child { border-bottom: none; }
      .addon-name { font-weight: 600; font-size: 0.95rem; display: block; margin-bottom: 4px; color: var(--text); }
      .version-row { font-size: 0.75rem; color: var(--text-dim); }
      .addon-actions { display: flex; align-items: center; gap: 8px; }
      
      .btn-primary { background: var(--accent); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: 0.2s; }
      .btn-primary:hover { background: #4c1d95; }
      
      .btn-update { background: var(--success); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; }
      .btn-update:hover { background: #059669; }
      
      .btn-delete { background: transparent; border: 1px solid var(--border); color: var(--text-dim); padding: 6px; border-radius: 6px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
      .btn-delete:hover { color: var(--danger); border-color: var(--danger); background: rgba(239, 68, 68, 0.1); }
      .lock-icon { font-size: 0.9rem; color: #eab308; } 

      #update-all-btn {
        width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: 0.2s; margin-top: 10px; box-shadow: 0 4px 10px rgba(91, 33, 182, 0.2); 
      }
      #update-all-btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 6px 15px rgba(91, 33, 182, 0.3); }
      #update-all-btn:disabled { background: var(--border); color: var(--text-dim); box-shadow: none; cursor: not-allowed; opacity: 0.8; transform: none; }

      #delete-btn { width: 100%; padding: 10px; background: transparent; border: 1px solid var(--border); color: var(--text-dim); border-radius: 8px; cursor: pointer; font-size: 0.8rem; margin-top: 10px; }
      #delete-btn:hover { color: var(--danger); border-color: var(--danger); }

      .optional-separator { margin: 15px 0 5px; text-align: center; border-bottom: 1px solid var(--border); line-height: 0.1em; color: var(--text-dim); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; }
      .optional-separator span { background: var(--card); padding: 0 10px; }
      
      #status-text { font-size: 0.8rem; color: var(--text-dim); text-align: center; margin-top: 8px; min-height: 1.2em; }

      /* MODAL */
      .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center; }
      .modal-content { background-color: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; width: 90%; max-width: 300px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
      .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px; font-weight: 700; }
      .modal-close { cursor: pointer; font-size: 1.5rem; line-height: 1; color: var(--text-dim); }
      .modal-close:hover { color: var(--text); }
      .setting-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
      
      .loader { border: 2px solid rgba(255, 255, 255, 0.3); border-top: 2px solid #ffffff; border-radius: 50%; width: 14px; height: 14px; animation: spin 1s linear infinite; margin-right: 8px; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
  </head>
  <body>
    <div class="container">
      <img src="APP_BANNER.png" class="main-banner" alt="Moonup Banner" onerror="this.style.display='none'">
      
      <div id="login-section" class="card" style="text-align: center;">
        <button id="login-btn" class="login-btn">Login mit Discord</button>
        <div id="login-status"></div>
      </div>

      <div id="user-display" style="display: none;">
         <div class="user-left">
            <span class="user-icon">üë§</span>
            <span id="username-label">User</span>
         </div>
         <button id="logout-btn" class="logout-btn">Abmelden</button>
      </div>

      <div class="card">
        <div class="section-header">
            <span class="section-title">WoW Installation</span>
            <button id="open-settings-btn" class="settings-icon" title="Einstellungen">‚öôÔ∏è</button>
        </div>
        <div id="path-display" class="path-display-box">Pfad w√§hlen...</div>
        <button id="change-path-btn" class="btn-secondary">Ordner √§ndern</button>

        <div class="addon-header">
            <span class="addon-title">Addons</span>
            <button id="refresh-btn" title="Neu laden">üîÑ</button>
        </div>
        
        <div id="addon-list"></div>
        
        <div class="optional-separator"><span>Status</span></div>
        <div id="status-text">Bereit.</div>
      </div>

      <button id="update-all-btn" style="display: none;">Alle aktualisieren üöÄ</button>
      <button id="delete-btn">Alles l√∂schen</button>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Einstellungen</span>
                <span id="close-settings-btn" class="modal-close">&times;</span>
            </div>
            <div class="setting-row">
                <span>Mit Windows starten</span>
                <input type="checkbox" id="autostart-cb">
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>